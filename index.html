<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Alt-shot as Threesomes (or Foursomes)</title>
  <style>
    body {
      font-family: 'Source Code Pro', -apple-system, sans-serif;
      margin: 20px;
      padding: 10px;
      line-height: 1.2;
      font-size: 12px;
      color: #333;
      background-color: #f5f5f5;
    }

    h1 {
      font-size: 16px;
      margin-bottom: 10px;
      font-weight: bold;
    }

    .info-box {
      font-size: 13px;
      color: #666;
      background-color: #fff;
      padding: 10px;
      border-radius: 5px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      margin-bottom: 10px;
    }

    .controls {
      background-color: #fff;
      padding: 10px;
      border-radius: 5px;
      margin-bottom: 10px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      font-size: 12px;
    }

    input[type="text"] {
      width: 100%;
      max-width: 500px;
      padding: 5px;
      font-size: 12px;
      font-family: 'Source Code Pro', sans-serif;
      border: 1px solid #ddd;
      border-radius: 3px;
      box-sizing: border-box;
    }

    input[type="text"]:focus {
      border-color: #999;
      outline: none;
    }

    button {
      margin-top: 10px;
      padding: 5px 10px;
      font-size: 12px;
      font-family: 'Source Code Pro', sans-serif;
      cursor: pointer;
      border: 1px solid #ddd;
      border-radius: 3px;
      background: #f5f5f5;
    }

    button:hover {
      background: #e0e0e0;
    }

    .error {
      color: #d32f2f;
      margin-top: 10px;
      font-size: 11px;
      background-color: #ffebee;
      padding: 5px;
      border-radius: 3px;
      display: none;
    }

    .error.show {
      display: block;
    }

    .grid-wrapper {
      margin-top: 10px;
    }

    .grid-wrapper > p {
      display: none;
      font-size: 11px;
      color: #666;
      background-color: #fff;
      padding: 10px;
      border-radius: 5px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      margin-bottom: 10px;
    }

    .grid-wrapper > p.show {
      display: block;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(9, 1fr);
      gap: 10px;
    }

    .hole-cell {
      border: 1px solid #ddd;
      border-radius: 5px;
      padding: 10px;
      font-size: 11px;
      background: #fff;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .hole-number {
      font-weight: bold;
      margin-bottom: 5px;
      font-size: 12px;
    }

    .follows-list {
      list-style: none;
      padding-left: 0;
      margin: 0;
    }

    .follows-list li {
      margin: 0;
      padding: 2px 0;
    }
  </style>
</head>
<body>
  <h1>Alt-Shot Generator (for three & foursomes)</h1>

  <div class="info-box">
    <strong>What is this?</strong> Most are familiar with how alternate shot works in a twosome; player1 hits tee-shots on even holes, player2 tees-off on the odds, Ryder Cup-style.<br><br>What would it look like, if, with a threesome, <b>everyone played tee-shots on <i>every</i> hole</b>, and each ball had a repeatable order, so there were <em>three</em> alt-shot "games" in play, for a round?
  </div>

  <div class="controls">
    <label for="playersInput">Players (3 or 4, comma-separated)</label>
    <input
      type="text"
      id="playersInput"
      placeholder="e.g. lanair, mdm, ronnie"
    />
    <br>
    <button id="generateBtn">Generate 18-Hole Batting Order</button>
    <div id="error" class="error"></div>
  </div>

  <div class="grid-wrapper">
    <p>"Follows" means player1 hits every shot (on that hole) that player2 has hit, until that ball is in the hole.</p>
    <div id="grid" class="grid"></div>
  </div>

  <script>
    function stepForHole(holeNumber, n) {
      // Steps cycle 1..(n-1)
      // n = 3 → 1,2,1,2,...
      // n = 4 → 1,2,3,1,2,3,...
      return ((holeNumber - 1) % (n - 1)) + 1;
    }

    function nextPlayerIndex(holeNumber, currentIndex, n) {
      const step = stepForHole(holeNumber, n);
      return (currentIndex + step) % n;
    }

    function generateBattingOrder(players, numHoles = 18) {
      const n = players.length;
      const result = [];

      for (let hole = 1; hole <= numHoles; hole++) {
        const follows = [];
        for (let i = 0; i < n; i++) {
          const j = nextPlayerIndex(hole, i, n);
          follows.push(`${players[j]} follows ${players[i]}`);
        }
        result.push({ hole, follows });
      }
      return result;
    }

    function renderGrid(order) {
      const grid = document.getElementById("grid");
      grid.innerHTML = "";

      order.forEach(({ hole, follows }) => {
        const cell = document.createElement("div");
        cell.className = "hole-cell";

        const holeLabel = document.createElement("div");
        holeLabel.className = "hole-number";
        holeLabel.textContent = `Hole ${hole}`;
        cell.appendChild(holeLabel);

        const ul = document.createElement("ul");
        ul.className = "follows-list";
        follows.forEach(text => {
          const li = document.createElement("li");
          li.textContent = text;
          ul.appendChild(li);
        });

        cell.appendChild(ul);
        grid.appendChild(cell);
      });
    }

    document.getElementById("generateBtn").addEventListener("click", () => {
      const raw = document.getElementById("playersInput").value.trim();
      const errorEl = document.getElementById("error");
      const descEl = document.querySelector(".grid-wrapper > p");
      errorEl.textContent = "";
      errorEl.classList.remove("show");
      descEl.classList.remove("show");

      if (!raw) {
        errorEl.textContent = "Please enter 3 or 4 player names.";
        errorEl.classList.add("show");
        return;
      }

      const players = raw
        .split(",")
        .map(p => p.trim())
        .filter(p => p.length > 0);

      if (players.length !== 3 && players.length !== 4) {
        errorEl.textContent = `Expected 3 or 4 players, got ${players.length}.`;
        errorEl.classList.add("show");
        return;
      }

      const order = generateBattingOrder(players, 18);
      renderGrid(order);
      descEl.classList.add("show");
    });
  </script>
</body>
</html>
